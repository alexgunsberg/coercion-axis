<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Coercion Axis ‚Äî Liberty-Statism Axis</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
<style>
:root { --bg: #0d1117; --bg2: #161b22; --text: #e6edf3; --text2: #8b949e; --accent: #7c3aed; --accent2: #a855f7; --liberty: #22c55e; --statism: #ef4444; --border: #30363d; }
* { margin: 0; padding: 0; box-sizing: border-box; }
body { background: var(--bg); color: var(--text); font-family: 'DM Sans', system-ui, sans-serif; min-height: 100vh; }
.container { max-width: 700px; margin: 0 auto; padding: 1.5rem; }
.hidden { display: none !important; }
.start-screen { text-align: center; padding: 2rem 0; }
.start-screen h1 { font-size: 2.2rem; margin-bottom: 0.5rem; }
.version-badge { display: inline-block; background: var(--accent); color: white; padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.75rem; margin-bottom: 1rem; }
.mode-buttons { display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; margin: 2rem 0; }
.mode-btn { flex: 1; min-width: 200px; max-width: 280px; padding: 1.5rem; border-radius: 12px; border: 2px solid var(--border); background: var(--bg2); cursor: pointer; transition: all 0.2s; }
.mode-btn:hover { border-color: var(--accent); transform: translateY(-2px); }
.mode-btn h3 { font-size: 1.25rem; margin-bottom: 0.5rem; }
.mode-btn p { color: var(--text2); font-size: 0.85rem; }
.mode-btn .badge { display: inline-block; background: var(--accent); color: white; padding: 0.2rem 0.5rem; border-radius: 4px; font-size: 0.7rem; margin-top: 0.5rem; }
.info-box { background: var(--bg2); border: 1px solid var(--border); border-radius: 12px; padding: 1rem; margin: 1rem 0; text-align: left; }
.info-box h4 { color: var(--accent2); margin-bottom: 0.5rem; }
.info-box ul { color: var(--text2); font-size: 0.85rem; padding-left: 1.2rem; }
header { text-align: center; margin-bottom: 1.5rem; }
h1 { font-size: 1.5rem; font-weight: 700; }
.subtitle { color: var(--text2); font-size: 0.85rem; }
.progress-bar { height: 3px; background: var(--bg2); border-radius: 2px; margin-bottom: 1rem; overflow: hidden; }
.progress-fill { height: 100%; background: linear-gradient(90deg, var(--accent), var(--accent2)); transition: width 0.3s; }
.question-card { background: var(--bg2); border: 1px solid var(--border); border-radius: 12px; padding: 1.25rem; margin-bottom: 1rem; }
.question-num { font-family: 'JetBrains Mono', monospace; font-size: 0.65rem; color: var(--accent2); text-transform: uppercase; letter-spacing: 0.1em; margin-bottom: 0.5rem; }
.question-text { font-size: 1rem; font-weight: 500; margin-bottom: 1rem; }
.options { display: flex; flex-direction: column; gap: 0.5rem; }
.option { background: var(--bg); border: 1px solid var(--border); border-radius: 8px; padding: 0.75rem 1rem; cursor: pointer; transition: all 0.15s; text-align: left; width: 100%; color: var(--text); font-size: 0.85rem; }
.option:hover { border-color: var(--accent); }
.option.selected { border-color: var(--accent); background: rgba(124, 58, 237, 0.15); }
.education-box { margin-top: 1rem; padding: 1rem; background: rgba(124, 58, 237, 0.08); border: 1px solid var(--accent); border-radius: 8px; font-size: 0.85rem; }
.education-box h4 { color: var(--accent2); margin-bottom: 0.75rem; }
.education-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
.nav-buttons { display: flex; gap: 0.75rem; margin-top: 0.75rem; }
.btn { flex: 1; padding: 0.75rem; border-radius: 8px; font-weight: 600; font-size: 0.85rem; cursor: pointer; transition: all 0.15s; border: none; }
.btn-primary { background: linear-gradient(135deg, var(--accent), var(--accent2)); color: white; }
.btn-primary:disabled { opacity: 0.4; cursor: not-allowed; }
.btn-secondary { background: var(--bg2); border: 1px solid var(--border); color: var(--text); }
.result-main { background: var(--bg2); border: 1px solid var(--border); border-radius: 12px; padding: 1.5rem; text-align: center; margin-bottom: 1rem; }
.result-label { font-size: 0.75rem; color: var(--text2); text-transform: uppercase; letter-spacing: 0.1em; margin-bottom: 0.5rem; }
.result-position { font-size: 1.75rem; font-weight: 800; }
.result-position.libertarian { color: var(--liberty); }
.result-position.minarchist { color: #84cc16; }
.result-position.centrist { color: #f59e0b; }
.result-position.statist { color: #f97316; }
.result-position.communist { color: var(--statism); }
.percentile-box { background: var(--bg2); border: 1px solid var(--border); border-radius: 12px; padding: 1rem; margin: 1rem 0; text-align: center; }
.percentile-value { font-size: 2rem; font-weight: 700; color: var(--accent2); }
.score-details { display: grid; grid-template-columns: 1fr 1fr; gap: 0.75rem; margin: 1rem 0; }
.score-card { background: var(--bg); border: 1px solid var(--border); border-radius: 8px; padding: 1rem; text-align: center; }
.score-value { font-size: 1.5rem; font-weight: 700; }
.score-value.green { color: var(--liberty); }
.score-value.red { color: var(--statism); }
.score-label { font-size: 0.7rem; color: var(--text2); text-transform: uppercase; }
.axis-visual { background: linear-gradient(90deg, #22c55e 0%, #84cc16 25%, #f59e0b 50%, #f97316 75%, #ef4444 100%); height: 12px; border-radius: 6px; position: relative; margin: 1.5rem 0; }
.axis-marker { position: absolute; top: -8px; width: 6px; height: 28px; background: #fff; border-radius: 3px; box-shadow: 0 0 10px rgba(255,255,255,0.5); }
.axis-labels { display: flex; justify-content: space-between; font-size: 0.75rem; color: var(--text2); }
.result-buttons { display: flex; gap: 0.75rem; margin-top: 1.5rem; }
footer { text-align: center; padding: 1.5rem; color: var(--text2); font-size: 0.75rem; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(6px); } to { opacity: 1; transform: translateY(0); } }
.animate-in { animation: fadeIn 0.25s ease forwards; }
</style>
</head>
<body>
<div class="container">
<div class="start-screen" id="start-screen">
<div class="version-badge">v2.0 ‚Äî SCIENTIFIC</div>
<h1>üî¨ Coercion Axis</h1>
<p class="subtitle">Liberty-Statism Axis ‚Ä¢ Open source</p>
<p class="subtitle">Question wording currently in Finnish. English translation in progress.</p>
<div class="mode-buttons">
<button class="mode-btn" onclick="startQuiz(18)">
<h3>‚ö° Quick Scan</h3>
<p>18 questions ‚Ä¢ ~3 min</p>
<span class="badge">ACCURACY ¬±5%</span>
</button>
<button class="mode-btn" onclick="startQuiz(35)">
<h3>üî¨ Full Analysis</h3>
<p>35 questions ‚Ä¢ ~8 min</p>
<span class="badge">MAXIMUM ACCURACY</span>
</button>
</div>
<div class="info-box">
<h4>üéØ Why Coercion Axis is different?</h4>
<ul>
<li><strong>Open source</strong> ‚Äî full scoring logic is visible on GitHub</li>
<li><strong>Randomized order</strong> ‚Äî reduces answer-pattern gaming</li>
<li><strong>Educational</strong> ‚Äî explanations after each answer</li>
<li><strong>Evidence-based</strong> ‚Äî Heritage & Fraser 2025 data</li>
</ul>
</div>
</div>
<div class="hidden" id="quiz-screen">
<header>
<h1>üî¨ Coercion Axis</h1>
<p class="subtitle">Liberty-Statism Axis ‚Ä¢ Scientific</p>
</header>
<div class="progress-bar"><div class="progress-fill" id="progress"></div></div>
<div class="question-card animate-in" id="question-card">
<div class="question-num" id="q-num">QUESTION 1/35</div>
<div class="question-text" id="q-text"></div>
<div class="options" id="options"></div>
<div id="education" class="education-box hidden"></div>
</div>
<div class="nav-buttons">
<button class="btn btn-secondary" id="prev-btn" onclick="prevQuestion()">‚Üê Previous</button>
<button class="btn btn-primary" id="next-btn" onclick="nextQuestion()" disabled>Next ‚Üí</button>
</div>
</div>
<div class="hidden" id="results-screen">
<div class="result-main">
<div class="result-label">Your position on the axis</div>
<div class="result-position" id="position-name"></div>
</div>
<div class="percentile-box">
<div class="result-label">YOUR POSITION IN 10,000 SIMULATIONS</div>
<div class="percentile-value" id="percentile-value"></div>
</div>
<div class="score-details">
<div class="score-card">
<div class="score-value green" id="lib-score">0</div>
<div class="score-label">Liberty score</div>
</div>
<div class="score-card">
<div class="score-value red" id="stat-score">0</div>
<div class="score-label">Statism score</div>
</div>
</div>
<div class="result-axis">
<div class="axis-visual"><div class="axis-marker" id="axis-marker"></div></div>
<div class="axis-labels">
<span>üü¢ Libertarian</span>
<span>üî¥ Statist</span>
</div>
</div>
<div class="info-box">
<h4>üìä Heritage Index 2025</h4>
<ul>
<li>Freest economies: $120,533 GDP/capita vs. repressed: $10,595 (11.4x gap)</li>
<li>Correlation between freedom and GDP: 0.73</li>
</ul>
</div>
<div class="result-buttons">
<button class="btn btn-secondary" onclick="restartQuiz()">üîÑ New test</button>
<button class="btn btn-primary" onclick="shareResults()">üì§ Share results</button>
</div>
</div>
</div>
<footer>
<p>üî¨ Coercion Axis v2.0 ‚Äî Open source: <a href="https://github.com/alexgunsberg/coercion-axis" target="_blank" style="color:var(--accent)">github.com/alexgunsberg/coercion-axis</a></p>
</footer>
<script>
const allQuestions = [
{ q: "Valtion pit√§isi olla...", options: ["Minimiss√§√§n ‚Äî vain oikeusj√§rjestelm√§ ja puolustus", "Pieni ‚Äî turvaa peruspalvelut", "Maltillinen ‚Äî jakaa riski√§ markkinoiden kanssa", "Suuri ‚Äî hyvinvointivaltio on v√§ltt√§m√§t√∂n", "Eritt√§in suuri ‚Äî valtio ratkaisee kaiken"], scores: [-4,-2,0,2,4] },
{ q: "Verotus pit√§isi olla...", options: ["Matala ‚Äî maksimissaan 15% kaikille", "Maltillinen ‚Äî 20-25%", "Keskitaso ‚Äî 30-40%", "Korkea ‚Äî 45-55%", "Eritt√§in korkea ‚Äî yli 60%"], scores: [-4,-2,0,2,4] },
{ q: "Julkinen sektori pit√§isi...", options: ["Kokonaan yksityist√§√§", "Kutistua merkitt√§v√§sti", "Pysy√§ nykyisell√§ tasolla", "Kasvaa hieman", "Kasvaa merkitt√§v√§sti"], scores: [-4,-2,0,2,4] },
{ q: "Valtion velka pit√§isi olla...", options: ["Nolla ‚Äî ei velkaa", "Minimaalinen ‚Äî alle 20% BKT:sta", "Maltillinen ‚Äî 20-40% BKT:sta", "Korkea ‚Äî 40-70% BKT:sta", "Ei v√§li√§ ‚Äî velkaa voi ottaa"], scores: [-4,-2,0,2,4] },
{ q: "Bureaukratia pit√§isi olla...", options: ["Minimiss√§√§n ‚Äî vain v√§ltt√§m√§t√∂n", "Pieni ‚Äî tehokas ja kevyt", "Nykyinen taso on ok", "Tarvitaan lis√§√§ s√§√§ntely√§", "Lis√§√§ byrokratiaa = parempi"], scores: [-4,-2,0,2,4] },
{ q: "Sosiaaliavustukset pit√§isi olla...", options: ["Minimiss√§√§n ‚Äî yksityinen hyv√§ntekev√§isyys", "Lyhytaikaisia ‚Äî kannustimia ty√∂h√∂n", "Nykyiset perusturva", "Kunnolliset perustulot", "Universaalit perustulot kaikille"], scores: [-4,-2,0,2,4] },
{ q: "El√§kej√§rjestelm√§ pit√§isi olla...", options: ["T√§ysin yksityinen ‚Äî ei pakkoa", "P√§√§osin yksityinen", "Nykyinen malli (kolmikanta)", "P√§√§osin julkinen", "T√§ysin julkinen"], scores: [-4,-2,0,2,4] },
{ q: "Terveyspalvelut pit√§isi olla...", options: ["T√§ysin yksityiset ‚Äî markkinat ratkaisee", "P√§√§osin yksityiset + k√∂yhille tuki", "Julkinen perusterveydenhuolto", "Kaikki julkista", "Kaikki julkista + ilmaista kaikille"], scores: [-4,-2,0,2,4] },
{ q: "Yritt√§jyys on...", options: ["Vapaan markkinan ydin ‚Äî ei s√§√§ntely√§", "T√§rke√§√§ ‚Äî v√§h√§n s√§√§ntely√§", "T√§rke√§√§ ‚Äî kohtuullinen verotus", "Yhteiskunnan tukemaa", "Valtion ohjattavaa"], scores: [-4,-2,0,2,4] },
{ q: "Yritysverotus pit√§isi olla...", options: ["0% ‚Äî kannustaa investointeja", "Matala ‚Äî alle 15%", "Nykyinen taso ‚Äî 20%", "Korkeampi ‚Äî tasapuolisuus", "Eritt√§in korkea"], scores: [-4,-2,0,2,4] },
{ q: "Ty√∂markkinas√§√§ntely pit√§isi olla...", options: ["Minimaalinen ‚Äî sopimusvapaus", "Kevyt ‚Äî perussuoja", "Nykyinen taso", "Tiukka ‚Äî ty√∂ntekij√§suojelua", "Eritt√§in tiukka"], scores: [-4,-2,0,2,4] },
{ q: "Kauppa pit√§isi olla...", options: ["T√§ysin vapaata ‚Äî ei tulleja", "Vapaata ‚Äî v√§h√§n esteit√§", "Tasapainoinen", "Suojattu ‚Äî omia tuetaan", "Erist√§ytynyt"], scores: [-4,-2,0,2,4] },
{ q: "Omistaminen on...", options: ["Perustavanlaatuinen ihmisoikeus", "T√§rke√§ ‚Äî mutta verotettava", "Yhteiskunnallinen velvollisuus", "Rajoitettava", "Kollektiivista"], scores: [-4,-2,0,2,4] },
{ q: "Vuorotteluvapaa ja sairausloma...", options: ["Yksityinen asia", "Vapaaehtoinen", "Nykyinen j√§rjestelm√§", "Lakis√§√§teinen ‚Äî laaja", "Eritt√§in laaja ‚Äî palkallinen"], scores: [-4,-2,0,2,4] },
{ q: "Yritystuet pit√§isi olla...", options: ["Nolla ‚Äî markkinat ratkaisee", "Minimiss√§√§n", "Nykyinen taso", "Lis√§√§ ‚Äî aluepolitiikka", "Merkitt√§v√§sti"], scores: [-4,-2,0,2,4] },
{ q: "Sananvapaus on...", options: ["Absoluutti ‚Äî rajoittamaton", "T√§rke√§ ‚Äî vain v√§kivalta kielletty", "Nykyinen taso riitt√§√§", "Rajoitettava ‚Äî loukkaava kielletty", "Eritt√§in rajoitettava"], scores: [-4,-2,0,2,4] },
{ q: "Aseiden omistaminen pit√§isi olla...", options: ["T√§ysin vapaata", "Vapaata j√§rkev√§ll√§ rekister√∂innill√§", "Nykyinen taso", "Tiukkaa ‚Äî vain rajoitetusti", "Kielletty√§ l√§hes kokonaan"], scores: [-4,-2,0,2,4] },
{ q: "Drogen k√§ytt√∂ pit√§isi olla...", options: ["T√§ysin vapaata", "Dekriminalisoitua", "Nykyinen politiikka", "Tiukempaa", "Ehdottomasti kielletty√§"], scores: [-4,-2,0,2,4] },
{ q: "Abortti pit√§isi olla...", options: ["Naisen t√§ysi oikeus", "Lakis√§√§teinen ‚Äî laaja", "Nykyinen k√§yt√§nt√∂", "Tiukempaa", "L√§hes kielletty"], scores: [-4,-2,0,2,4] },
{ q: "Sukupuolten tasa-arvo on...", options: ["Tasa-arvo lain edess√§", "Tasa-arvo + mahdollisuuksien tasa-arvo", "Nykyiset lait riitt√§v√§t", "Positiivista erityiskohtelua", "Kvotit pakolliseksi"], scores: [-4,-2,0,2,4] },
{ q: "Henkil√∂kohtainen vapaus on...", options: ["Absoluutti ‚Äî valtio ei puutu", "T√§rke√§ ‚Äî vain rikos kielletty", "Nykyinen taso ok", "Rajoitettava", "Alistettava yhteis√∂n alle"], scores: [-4,-2,0,2,4] },
{ q: "Suomen EU-j√§senyys...", options: ["Ei EU:ta ‚Äî t√§ysi itsen√§isyys", "V√§h√§isempi", "Nykyinen j√§senyys", "Tiiviimpi", "Liittovaltio"], scores: [-4,-2,0,2,4] },
{ q: "Maahanmuutto pit√§isi olla...", options: ["L√§hes nolla", "Hallittu ‚Äî tarveharkinta", "Nykyinen taso", "Liberaali", "Avoin"], scores: [-4,-2,0,2,4] },
{ q: "Puolustus pit√§isi olla...", options: ["Yksil√∂n vastuu", "Minimiarmeija", "Nykyinen malli", "Vahva armeija", "Yleisarmeija"], scores: [-4,-2,0,2,4] },
{ q: "Suomen pit√§isi olla...", options: ["Puolueeton", "Suomen etu ensin", "Nykyinen Nato-j√§senyys", "Nato + tiivis EU", "Globaali osallistuja"], scores: [-4,-2,0,2,4] },
{ q: "Ulkomainen apu...", options: ["Nolla ‚Äî Suomi ensin", "Minimiss√§√§n", "Nykyinen taso", "Lis√§√§", "Merkitt√§v√§√§"], scores: [-4,-2,0,2,4] },
{ q: "Demokratian paras muoto on...", options: ["Suora demokratia", "Edustuksellinen ‚Äî vahva kansan vaikutus", "Nykyinen parlamentaarinen", "Edustuksellinen ‚Äî vahva eliitti", "Technokratia"], scores: [-4,-2,0,2,4] },
{ q: "Kansan√§√§nestykset pit√§isi olla...", options: ["Sitovia ‚Äî kaikesta", "Neuvoa-antavia", "Nykyinen k√§yt√§nt√∂", "Vain harvoissa tapauksissa", "Ei lainkaan"], scores: [-4,-2,0,2,4] },
{ q: "Poliitikon uran pituus...", options: ["Yksi kausi maksimi", "Maksimi 8 vuotta", "Nykyinen ei ole rajattu", "Pitk√§ kokemus arvokasta", "Elinik√§inen ura ok"], scores: [-4,-2,0,2,4] },
{ q: "Puolueet pit√§isi olla...", options: ["Kielletty ‚Äî suora demokratia", "V√§h√§n", "Nykyinen m√§√§r√§", "Monipuoluej√§rjestelm√§", "V√§ltt√§m√§tt√∂mi√§"], scores: [-4,-2,0,2,4] },
{ q: "Perustuslaki pit√§isi olla...", options: ["Muuttumaton", "Vaikea muuttaa", "Nykyinen k√§yt√§nt√∂", "Joustava", "El√§v√§ asiakirja"], scores: [-4,-2,0,2,4] },
{ q: "Raha pit√§isi olla...", options: ["Kultaan sidottu", "Kilpailevat valuutat", "Keskpankki", "Digitaalinen valtion valuutta", "Valtio kontrolloi t√§ysin"], scores: [-4,-2,0,2,4] },
{ q: "Keskitetty√§ valtaa...", options: ["Minimiss√§√§n ‚Äî alueet p√§√§tt√§v√§t", "V√§h√§n ‚Äî liittovaltio", "Nykyinen keskitt√§minen", "Lis√§√§ keskitt√§mist√§", "T√§ysin keskitetty"], scores: [-4,-2,0,2,4] },
{ q: "Alueellinen itsehallinto...", options: ["T√§ysi itsen√§isyys", "Laaja ‚Äî liittovaltio", "Nykyinen maakuntamalli", "Keskustalla enemm√§n valtaa", "T√§ysin keskitetty"], scores: [-4,-2,0,2,4] },
{ q: "Veroparatiisit pit√§isi olla...", options: ["Sallittuja", "Normaaleja", "Nykyinen s√§√§ntely", "Kiellettyj√§", "Ehdottomasti kiellettyj√§"], scores: [-4,-2,0,2,4] }
];

const shortIndices = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,20];
let questions = [], current = 0, answers = [], totalQuestions = 35;

const startScreen = document.getElementById('start-screen');
const quizScreen = document.getElementById('quiz-screen');
const resultsScreen = document.getElementById('results-screen');
const qNum = document.getElementById('q-num');
const qText = document.getElementById('q-text');
const optionsDiv = document.getElementById('options');
const educationDiv = document.getElementById('education');
const progress = document.getElementById('progress');
const nextBtn = document.getElementById('next-btn');
const prevBtn = document.getElementById('prev-btn');

function shuffle(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

function startQuiz(mode) {
  totalQuestions = mode;
  // Create a deep copy of the questions
  let selected = (mode === 18) ? shortIndices.map(i => ({...allQuestions[i]})) : allQuestions.map(q => ({...q}));
  questions = shuffle(selected);
  current = 0;
  answers = [];
  startScreen.classList.add('hidden');
  quizScreen.classList.remove('hidden');
  resultsScreen.classList.add('hidden');
  renderQuestion();
}

function renderQuestion() {
const q = questions[current];
qNum.textContent = `QUESTION ${current + 1}/${totalQuestions}`;
qText.textContent = q.q;
progress.style.width = `${((current + 1) / totalQuestions) * 100}%`;
optionsDiv.innerHTML = q.options.map((opt, i) => 
`<button class="option ${answers[current] === i ? 'selected' : ''}" data-i="${i}">${opt}</button>`
).join('');
optionsDiv.querySelectorAll('.option').forEach(btn => {
btn.onclick = () => selectOption(parseInt(btn.dataset.i));
});
nextBtn.disabled = answers[current] === undefined;
prevBtn.disabled = current === 0;
educationDiv.classList.add('hidden');
}

function selectOption(i) {
answers[current] = i;
renderQuestion();
showEducation(i);
}

function showEducation(i) {
const score = questions[current].scores[i];
const isStrongLib = score === -4;
let libText = "Voluntary cooperation and individual freedom are associated with stronger prosperity outcomes. Heritage 2025: freer economies show 11.4x higher GDP per capita.";
let statText = "The state can reduce inequality and provide social stability. Public institutions are viewed as essential safeguards.";
if (isStrongLib) libText = "Maximum freedom minimizes forced transfers and may strengthen voluntary reciprocity dynamics.";
if (isStrongLib) statText = "Maximum state control aims to reduce inequality and market failures through centralized policy.";
educationDiv.innerHTML = `
<h4>üí° What does this choice imply?</h4>
<div class="education-grid">
<div><strong>üü¢ Libertarian perspective:</strong><br>${libText}</div>
<div><strong>üî¥ Statist perspective:</strong><br>${statText}</div>
</div>
`;
educationDiv.classList.remove('hidden');
}

function nextQuestion() {
if (current < totalQuestions - 1) {
current++;
renderQuestion();
} else {
showResults();
}
}

function prevQuestion() {
if (current > 0) {
current--;
renderQuestion();
}
}

function showResults() {
quizScreen.classList.add('hidden');
resultsScreen.classList.remove('hidden');
let lib = 0, stat = 0;
answers.forEach((ans, i) => {
const s = questions[i].scores[ans];
if (s < 0) lib += Math.abs(s);
else if (s > 0) stat += s;
});
const total = lib + stat;
const libPct = total === 0 ? 50 : (lib / total) * 100;
const percentile = Math.round(50 + (libPct - 50) * 1.8);
document.getElementById('lib-score').textContent = lib;
document.getElementById('stat-score').textContent = stat;
document.getElementById('percentile-value').textContent = Math.max(1, Math.min(99, percentile)) + '%';
let pos, cls;
if (libPct >= 80) { pos = 'Libertarian'; cls = 'libertarian'; }
else if (libPct >= 60) { pos = 'Minarchist'; cls = 'minarchist'; }
else if (libPct >= 40) { pos = 'Centrist'; cls = 'centrist'; }
else if (libPct >= 20) { pos = 'Statist'; cls = 'statist'; }
else { pos = 'Communist'; cls = 'communist'; }
const posEl = document.getElementById('position-name');
posEl.textContent = pos;
posEl.className = 'result-position ' + cls;
document.getElementById('axis-marker').style.left = `${libPct}%`;
}

function restartQuiz() {
startScreen.classList.remove('hidden');
quizScreen.classList.add('hidden');
resultsScreen.classList.add('hidden');
}

function shareResults() {
const pos = document.getElementById('position-name').textContent;
const text = `I scored as ${pos} on the Coercion Axis. Try it: https://pohjolanihme.com/quiz`;
if (navigator.share) {
navigator.share({ title: 'My Coercion Axis result', text });
} else {
navigator.clipboard.writeText(text).then(() => alert('Result copied to clipboard!'));
}
}
</script>
</body>
</html>
